defmodule Day04Test do
  use ExUnit.Case

  import Advent.Day04
  alias Advent.Day04.Board

  @example [
    "7,4,9,5,11,17,23,2,0,14,21,24,10,16,13,6,15,25,12,22,18,20,8,19,3,26,1",
    "",
    "22 13 17 11  0",
    " 8  2 23  4 24",
    "21  9 14 16  7",
    " 6 10  3 18  5",
    " 1 12 20 15 19",
    "",
    " 3 15  0  2 22",
    " 9 18 13 17  5",
    "19  8  7 25 23",
    "20 11 10 24  4",
    "14 21 16 12  6",
    "",
    "14 21 17 24  4",
    "10 16 15  9 19",
    "18  8 23 26 20",
    "22 11 13  6  5",
    " 2  0 12  3  7"
  ]

  @example_winner [
    "14 21 17 24  4",
    "10 16 15  9 19",
    "18  8 23 26 20",
    "22 11 13  6  5",
    " 2  0 12  3  7"
  ]

  test "parse" do
    assert Board.parse(@example_winner) == %Board{
             coords: %{
               14 => {0, 0},
               21 => {0, 1},
               17 => {0, 2},
               24 => {0, 3},
               4 => {0, 4},
               10 => {1, 0},
               16 => {1, 1},
               15 => {1, 2},
               9 => {1, 3},
               19 => {1, 4},
               18 => {2, 0},
               8 => {2, 1},
               23 => {2, 2},
               26 => {2, 3},
               20 => {2, 4},
               22 => {3, 0},
               11 => {3, 1},
               13 => {3, 2},
               6 => {3, 3},
               5 => {3, 4},
               2 => {4, 0},
               0 => {4, 1},
               12 => {4, 2},
               3 => {4, 3},
               7 => {4, 4}
             },
             state: %{
               {0, 0} => {14, false},
               {0, 1} => {21, false},
               {0, 2} => {17, false},
               {0, 3} => {24, false},
               {0, 4} => {4, false},
               {1, 0} => {10, false},
               {1, 1} => {16, false},
               {1, 2} => {15, false},
               {1, 3} => {9, false},
               {1, 4} => {19, false},
               {2, 0} => {18, false},
               {2, 1} => {8, false},
               {2, 2} => {23, false},
               {2, 3} => {26, false},
               {2, 4} => {20, false},
               {3, 0} => {22, false},
               {3, 1} => {11, false},
               {3, 2} => {13, false},
               {3, 3} => {6, false},
               {3, 4} => {5, false},
               {4, 0} => {2, false},
               {4, 1} => {0, false},
               {4, 2} => {12, false},
               {4, 3} => {3, false},
               {4, 4} => {7, false}
             }
           }
  end

  test "part 1 example" do
    assert play(@example) == 4512
  end
end
